"use strict";(self.webpackChunkwebgame_matching=self.webpackChunkwebgame_matching||[]).push([[304],{304:(t,e,s)=>{s.r(e),s.d(e,{default:()=>f});var i={};s.r(i),s.d(i,{render:()=>r,staticRenderFns:()=>l});var n={};s.r(n),s.d(n,{render:()=>o,staticRenderFns:()=>d});var a={};s.r(a),s.d(a,{render:()=>p,staticRenderFns:()=>h});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid px-0",on:{paste:function(e){return e.preventDefault(),t.onPaste.apply(null,arguments)},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)},dragover:function(t){t.preventDefault()}}},[s("nav",{staticClass:"navbar navbar-dark bg-dark"},[s("div",{staticClass:"navbar-brand d-flex w-100"},[s("div",{staticClass:"mr-1"},[t._v("瞬間記憶大挑戰")]),s("open-image",{staticClass:"mb-0",on:{load:t.insert}},[t._v("上傳")]),t.items.length?s("div",{staticClass:"d-inline-block"},[t.isAllFlipped()?s("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:function(e){return t.flipAll(!1)}}},[t._v("蓋牌")]):t._e(),t.isAllFlipped()?t._e():s("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:function(e){return t.flipAll(!0)}}},[t._v("亮牌")]),s("div",{staticClass:"btn btn-warning btn-sm my-auto",on:{click:t.reset}},[t._v("重置")]),s("b-form-input",{staticClass:"my-auto ml-1",staticStyle:{"max-width":"200px"},attrs:{type:"range",min:"100",max:"400",step:"5"},model:{value:t.size,callback:function(e){t.size=t._n(e)},expression:"size"}}),t.isAllFlipped()?t._e():s("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:t.makeAnswer}},[t._v("出題")])],1):t._e(),s("div",{staticClass:"ml-auto"},[t.items.length&&t.isAllFlipped()?s("div",{staticClass:"ml-0"},[t.startAt?s("interval",{attrs:{delay:"1000"},on:{elapsed:t.refreshTime,stop:t.stopTime}},[s("b-badge",{attrs:{pill:"",variant:"primary"}},[s("b-icon-clock")],1),s("span",[t._v(t._s(Math.floor((t.timeAt-t.startAt)/1e3)))])],1):t._e()],1):t._e()])],1)]),s("div",{staticClass:"container-fluid px-0 d-flex flex-wrap justify-content-around align-items-center",staticStyle:{"min-height":"calc(100vh - 60px)"}},t._l(t.items,(function(e,i){return s("div",{key:e._uid,staticClass:"game-card mt-2",style:{width:t.size+"px",height:t.size+"px"}},[s("transition",{staticClass:"d-relative",attrs:{name:"flip"}},[e.flipped?s("div",{key:"front",staticClass:"card pb-0 d-absolute game-card justify-content-around align-items-center",style:{width:t.size+"px",height:t.size+"px"},on:{click:function(e){return t.choice(i)}}},[s("img",{staticClass:"mw-100 mh-100",attrs:{src:e.src}})]):s("div",{key:"back",staticClass:"card p-0 d-absolute btn",attrs:{src:e.src},on:{click:function(e){return t.choice(i)}}},[s("div",{staticClass:"w-100 game-card jumbotron p-0 text-center mb-0 d-flex justify-content-around align-items-center h1",style:{width:t.size+"px",height:t.size+"px"}},[t._v(t._s(e.no))])])])],1)})),0)])},l=[],c=s(339),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.id?s("div",{staticClass:"d-inline-block"},[s("input",{staticClass:"d-none",attrs:{id:t.id,type:"file",accept:"image/*",multiple:""},on:{change:t.change}}),s("label",{staticClass:"btn btn-secondary btn-sm mb-0",attrs:{for:t.id}},[s("b-icon-card-image")],1)]):t._e()},d=[];const m={...n,props:[],data:function(){return{id:""}},created(){this.id=`img-${this._uid}`},mounted(){},methods:{change(t){const e=t.srcElement;for(const t of e.files)this.readFile(t);e.value=""},readFile:function(t){const e=this,s=new window.FileReader;s.addEventListener("load",(function(){const t=s.result,i=new window.Image;i.onload=function(){const{width:s,height:n}=this;Object.assign(e,{width:s,height:n,url:t}),e.$emit("load",i,e)},i.src=t}),!1),t&&s.readAsDataURL(t)}}};var p=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._t("default")],2)},h=[];const u={...a,props:["delay"],data:function(){return{intervalId:null}},beforeMount(){const{delay:t}=this,e=this;e.$emit("start"),this.intervalId=setInterval((function(){e.$emit("elapsed")}),t)},beforeDestroy(){this.$emit("stop"),clearTimeout(this.intervalId)}},f={...i,components:{Interval:u,OpenImage:m},data:()=>({startAt:0,timeAt:0,size:200,answerIndex:null,items:[]}),mounted(){s.e(368).then(s.bind(s,368))},methods:{onPaste(t){[...t.clipboardData.files].forEach((t=>{this.parseImg(t)}))},onDrop(t){[...t.dataTransfer.files].forEach((t=>{this.parseImg(t)}))},parseImg:function(t){const e=this,s=new window.FileReader;s.addEventListener("load",(function(){const t=s.result,i=new window.Image;i.onload=function(){e.insert(i)},i.src=t}),!1),t&&s.readAsDataURL(t)},insert(t){if(!t)return;const e=this.items.length;this.items.push({id:e,flipped:!1,src:t.src}),this.reset()},makeAnswer(){const{items:t}=this;let e,s;for(;!e||e.flipped;)s=this.answerIndex=Math.floor(Math.random()*t.length),e=t[s];c.fire({customClass:{htmlContainer:"h-75",image:""},didOpen:()=>{c.getContainer().onclick=c.close},showConfirmButton:!1,title:"請尋找",icon:"question",html:`<img src="${e.src}" class="h-100">`})},choice(t){const{items:e,answerIndex:s}=this,i=e[t];i.flipped||(i.flipped=!0,t===s&&c.fire({title:"答對了!",icon:"success",didOpen:()=>{c.getContainer().onclick=c.close},showConfirmButton:!1}))},isAllFlipped(){const{items:t}=this;return t.filter((t=>t.flipped)).length===t.length},flipAll(t){const{items:e}=this;for(let s=0;s<e.length;s++)e[s].flipped=t;t&&this.startTime()},startTime(){this.startAt=this.timeAt=Date.now()},stopTime(){this.startAt=null},refreshTime(){this.timeAt=Date.now()},reset(){const t=this.items,e=t.length;for(let s=0;s<e;s++)for(let i=s+1;i<e;i++){const i=parseInt(Math.random()*e),n=t[i];t[i]=t[s],t[s]=n}Object.assign(this,{first:null,second:null});for(let s=0;s<e;s++)t[s].no=s+1,t[s].flipped=!1}}}}}]);